<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Network randomness schemes - W3F Research</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <a class="navbar-brand" href="../..">W3F Research</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#network-randomness-schemes">Network randomness schemes</a></li>
            <li><a href="#collaborative-prngs">Collaborative PRNGs</a></li>
            <li><a href="#specific-random-results">Specific random results</a></li>
        <li class="main "><a href="#network-randomness-uses">Network randomness uses</a></li>
            <li><a href="#validator-group-assignments">Validator group assignments</a></li>
            <li><a href="#finality-gadget-leader-assignments">Finality gadget leader assignments</a></li>
            <li><a href="#block-production-leader-assignments">Block production leader assignments</a></li>
            <li><a href="#fishermen-incentivization">Fishermen incentivization</a></li>
        <li class="main "><a href="#timing">Timing</a></li>
            <li><a href="#randao_1">RANDAO</a></li>
            <li><a href="#ouroboros-rate-metering">Ouroboros rate metering</a></li>
            <li><a href="#ideas">Ideas</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="network-randomness-schemes">Network randomness schemes</h1>
<p>These are our reviews of collaborative random number generators (RNGs)
or other networked randomness schemes</p>
<h2 id="collaborative-prngs">Collaborative PRNGs</h2>
<p>There are several true collaborative PRNG schemes in which all participants obtain the same output and can then run arbitrary randomised algorithms with identical seeds and results.  As a result, we can employ more randomised algorithms that produce exact outputs like permutations of nodes, or require more complexity or tweaking.  </p>
<h3 id="verifiable-delay-functions-vdfs">Verifiable Delay Functions (VDFs)</h3>
<p>VDFs employ a slow non-parallelizable computation and provide a PRNG with a proof that some time period elapsed between when seeds were available and when the output was available.  Right now, the best ideas for this want a group of unknown order, like maybe the class group of an imaginary quadratic number field.
https://crypto.stanford.edu/~dabo/pubs/papers/VDFsurvey.pdf</p>
<p>Justin Drake with Etherium research is very interested in VDFs because VDFs provide a collaborative PRNG in which one honest party suffices to produce a secure random number.  We currently fear that VDFs deployment strategies have an excessively small security margin.  An attacker might for example compute the VDF 10x faster to gains the random number early or even bias it.  ASICS might be achieve this.  At the extreme, <a href="https://en.wikipedia.org/wiki/Superconducting_computing">superconducting computing</a> can achieve speeds of 100 GHz with circuits consisting of 10^5 Josephson junctions.  You’d need a rather large time window to use a VDFs, and you’d need an even larger time window to handle the highly optimised VDF node equivocating.</p>
<h3 id="dfinity-style-vss-vrf">DFinity style VSS + VRF</h3>
<p>We might not fully understand the VRF's roll here because the public
key correctness ultimately depends on the VSS based DKG and this
depends upon validator nodes raising accusations.  We believe they
do this so that one DKG yields numerous VRF outputs, maybe because
the DKG is considerably more expensive, or not amenable to some
optimisations.  </p>
<p>Almost all the pure cryptography implementation work consists of
following the DKG design in
<em>Secure Distributed Key Generation for Discrete-Log Based Cryptosystems</em>
by Rosario Gennaro, Stanisl􏱑aw Jarecki, Hugo Krawczyk, and Tal Rabin.</p>
<p>There is no actual production of a BLS signature produced there
however, so one should also look over section 7 of 
<em>DFINITY Technology Overview Series Consensus System</em> (Rev. 1)
by Timo Hanke, Mahnush Movahedi and Dominic Williams.</p>
<h3 id="schoenmakers-pvss-ala-epfl">Schoenmakers PVSS ala EPFL</h3>
<p>"A publicly verifiable secret sharing (PVSS) scheme is a verifiable
secret sharing scheme with the property that the validity of the
shares distributed by the dealer can be verified by any party; hence
verification is not limited to the respective participants receiving
the shares."</p>
<p>An implementation would follow 
<em>A Simple Publicly Verifiable Secret Sharing Scheme and its Application to Electronic Voting</em>
by Berry Schoenmakers,<br />
as well as the DEDIS group at EPFL's Kyber suite written in Go:
https://github.com/dedis/kyber/tree/master/share</p>
<p>As written, the resulting secret is a random curve point, not a BLS
signature or private scalar.  In comparison, DFinity's VSS + VRF
scheme produces a BLS signature, or even shared private scalar.
If the message is known in advance, then PVSS could seemingly
produce a BLS signature, although I need to think more about the
timing of protocol messages in doing so.  If correct, this might
answer an important open question of DFinity's Timo Hanke, but
maybe not the answer he wants, as PVSS probably need to be run for
every signature produced, and DFinity's solution runs the DFG 
infrequently.</p>
<p>Schoenmakers' PVSS avoids pairings but incorporates two rounds of
DLEQ proofs.  These are complex operations, but might prove faster
than DFinity's VSS + VRF scheme, due to pairing based curve. 
Also, ee need to verify that a type III pairing does not make the
protocol insecure and worry if components like the DLEQ proofs need
to change for my proposed PVSS + VCF variant.  We must also consider
if any attacks can influence the public key.</p>
<h2 id="specific-random-results">Specific random results</h2>
<p>There are various schemes that produce specific random results
without actually producing a shared random value, but the result
are necessarily inexact and may need to be simpler or complicate
the consensus process.</p>
<p>These are mostly applications of verifiable random functions (VRFs),
which normally consist of applying a random oracle to the output of
a deterministic signature scheme applied to a shared value. </p>
<h3 id="competitive-vrfs">Competitive VRFs</h3>
<p>It's hard to apply VRFs competitively because attackers may delay
revealing their results, pretend not to see other's results, use
network flood attacks on winners, etc., so roughly the same problems
as simple commit and reveal.</p>
<h3 id="ouroboros-style-slot-filling-vrfs">Ouroboros style "slot filling" VRFs</h3>
<p>We avoid the competitive VRFs issues by using VRFs to fill slots
far more numerous than actual winning positions, say slots for block
production.  There remain related issues with timing and when block
producers may skip earlier ones, which require more thought, and may
impact other things.</p>
<p>Security proofs exist, but tricky UC ones.</p>
<p>See Ouroboros paper #2 
TODO: link</p>
<h3 id="alistairs-vrf-leveraging-random-block-selection">Alistair's VRF leveraging random block selection</h3>
<p>If we have a network randomness scheme picking block producers or
many another specific random results, then they could include a VRF
of the block number.  As above, each node's only options are to
produce a block or not produce a block, so whatever alternatives
nodes they have who could produce a block give them influence over
the random number, but another user might produce a block first
scooping them.  </p>
<p>Although not a collaborative PRNG per se, this produces random
numbers we might argue can be used like collaboratively produced
ones.  Alistair says we cannot wait for finalisation here, but
disagreement results from multiple chains running in parallel.</p>
<h3 id="algorand">Algorand</h3>
<p>Algorand has similarities to Tindermint, but selects validators
randomly from a pool, instead of using a fixed set, and does a
Byzantine agreement for each block.  All nodes produce possible
blocks and a VRFs helps choose among them.</p>
<h3 id="randao">RANDAO</h3>
<p>Nodes commit to a hash onion and use the layers like a local VRF,
revealing one layer whenever doing so allows them to produce a block.
RANDAO is less outright computation than local VRFs for verifiers.
Also VRFs on different seeds do not aggregate well.  RANDAO requires
verifiers verify update records for all other verifiers though,
which sounds more fragile than a VRF, meaning more sensitive code.
RANDAO producers may take a performance hit from storing intermediate
hashes, but if so Merkle trees give another similar option.</p>
<p>We think orphan blocks prevents us from slashing nodes for skipping
their turn, so either all nodes must have a RANDAO contribution for
each slot, or else nodes can increases their control over their
revealed values by skipping blocks.</p>
<p>https://ethresear.ch/t/rng-exploitability-analysis-assuming-pure-randao-based-main-chain/1825/4
https://ethresear.ch/t/randao-beacon-exploitability-analysis-round-2/1980
https://ethresear.ch/t/making-the-randao-less-influenceable-using-a-random-1-bit-clock/2566</p>
<h1 id="network-randomness-uses">Network randomness uses</h1>
<h2 id="validator-group-assignments">Validator group assignments</h2>
<p>We think local VRFs, either competitive or slot filling, do not
produce an even enough distribution and do not permit us to
allocate stake well across validators.  So we want a real
collaborative PRNGs here.</p>
<p>Relevant questions:
- Can we produce a security proof for Alistair's VRF leveraging?
- How does Ouroboros handle similar situations?
- Is PVSS + VRF better?</p>
<h2 id="finality-gadget-leader-assignments">Finality gadget leader assignments</h2>
<p>Alistair thinks rotation solves everything currently.<br />
An alternative is Algorand's local VRF.</p>
<h2 id="block-production-leader-assignments">Block production leader assignments</h2>
<p>Etherium and Ouroboros handle this with RANDAO and their "slot
filling" VRF, respectively.  We think Ouroboros's VRF has
significant implementation advantages, but we may reevaluate
after we take performance more into consideration.</p>
<h2 id="fishermen-incentivization">Fishermen incentivization</h2>
<p>We envision creating a small about of random missbehavior so that
fishermen always have some missbehavior to catch.  We should do this
with local VRFs so that nobody except the missbehaving node knows in
advance, but the levels should be low enough that such missbehavior
cannot accumulate.</p>
<p>Are there other fishermen related uses?  Rob mentioned ordering 
fishermen, which sounds problematic.</p>
<h1 id="timing">Timing</h1>
<p>TODO: Comment on relative block time vs. more absolute synced clock times.
  ability to have timeout that depend on network activity?  (relative absolute time??)
  but think about the network conditions</p>
<p>We seemingly need a bound on clock skew between validators, which
we must enforce using the peer-to-peer network.</p>
<h3 id="randao_1">RANDAO</h3>
<p>We noticed possible timing issues with RANDAO that impact most other
schemes:  An attacker can manipulate the timing of their blocks to
help maintain a forked chain.  TODO: Add details.</p>
<h3 id="ouroboros-rate-metering">Ouroboros rate metering</h3>
<p>Ouroboros paper 3 describes minimum rate requirement for protection
against long term attacks.  The idea goes that a long-term attacker
starts with relatively little stake, so initially they produce blocks
slower than the overall network, but as their stake increases this
rate goes up.  Ouroboros wants to prevent this initial slow start,
but this requires </p>
<h3 id="ideas">Ideas</h3>
<p>Unavailability game
Time or relative time signing</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
