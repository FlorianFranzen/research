\section{Proof Details}

\begin{lemma}\label{lem:permutation}
For any slot number $s$, block producer $bp$, epoch randomness $r$ for the epoch that includes $s$, integer $k >0$, and parachain $P$, with probability at least $1-(f/n)^{-k}$ over the epoch randomness and the random oracles for the hashes and VRFs, for any block that $bp$ produces in slot $s$ that includes a parachain header from $P$, if we eventually have $\vcheck \geq k$ for this parachain header, then some honest validator checks the parachain block.
\end{lemma}
\begin{proof}
Consider generating an ordering $\ell$ of validators as follows, first we have the parachain validators in a uniformly random order, then all validators who satisfy condition (\ref{cond:mod}) (using $bp$'s VRF for slot $s$) in a uniformly random order, then we order all remaining validators in increasing order of the hash $H(ID_{PC} || \mathtt{VRF}_{\sk^v_j}(V))$ used in condition (\ref{cond:time}), breaking ties due to collisions in a uniformly random order. We claim that distribution of $\ell$ is as a uniformly random permutation of the validator set. To see this note that the only operation for which the different validators are treated differently are the VRFs and we assume that they are random oracles. The parachain validators are a set of $n/m$ validators chosen uniformly at random using $r$. Each validator satisfies condition (\ref{cond:mod}) with the same probability independently and so the distribution of the set of validators satisfying (1) conditioned on its size is a set of that size chosen uniformly at random from the non-parachain validators. Also the hashes in (2) are independently and identically distributed.

Next we show that for any block $bp$ produces in slot $s$ which includes a parachain header for $P$,  if any honest validator ever sees that $\vcheck \geq k$, then any honest validators in the first $k$  validators in $\ell$ eventually check that block. All honest parachain validators and honest validators who satisfy (\ref{cond:mod}) check. If all honest validators in the fist $k$ validators in $\ell$ satisfy these conditions we are done. So suppose that $v$ is an honest validator in the first $k$ validators in $\ell$ who doesn't satisfy either of these conditions. $v$ will still check if $\tau$ is large enough and they don't see attestation from $\vcheck$ validators who either are parachain validators, satisfied condition (\ref{cond:mod})  or had a smaller hash in condition (\ref{cond:time}). But noting that all such validators are before $v$ in $\ell$ so there can be at most $k-1$ of them. Thus $v$ only ever counts $k-1$ attestations towards the number needed $\vcheck$ which is eventually $\geq k$. So when $\vcheck \geq k$ and $\tau$ is large enough, $v$ checks.

Finally we need to show that the probability that the first $k$ validators in $\ell$ are honest is at least $(f/n)^k$. Since the first $k$ validators in $\ell$ are distributed as a set of $k$ validators chosen uniformly at random, this probability is $\prod_{i=0}^{k-1} (f-i)/(n-i) \leq (f/n)^k$.
\end{proof}