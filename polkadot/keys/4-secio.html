
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Transport layer authentication - libp2p’s SECIO &#8212; Web3 Foundation Research  documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/stylesheets/extra.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"extensions": ["tex2jax.js"], "jax": ["input/TeX", "output/HTML-CSS"], "tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "displayMath": [["$$", "$$"], ["\\[", "\\]"]], "processEscapes": true}, "HTML-CSS": {"fonts": ["TeX"]}})</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Account key creation ideas for Polkadot" href="creation.html" />
    <link rel="prev" title="Session keys" href="3-session.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p>https://forum.web3.foundation/t/transport-layer-authentication-libp2ps-secio/69</p>
<div class="section" id="transport-layer-authentication---libp2p-s-secio">
<h1>Transport layer authentication - libp2p’s SECIO<a class="headerlink" href="#transport-layer-authentication---libp2p-s-secio" title="Permalink to this headline">¶</a></h1>
<p>We must authenticate connections as the transport layer from session keys, which could happen in several ways, like signing a hash provided by the transport layer.  A priori, we could simplify everything if the session key simply included the static key used in authentication component of the transport layer’s key exchange, which might help avoid some security mistakes elsewhere too.  </p>
<p>There are numerous transports for libp2p, but only QUIC was actually designed to be secure.  Instead, one routes traffic through <a class="reference external" href="https://github.com/libp2p/specs/pull/106">libp2p’s secio protocol</a>.  We trust QUIC’s cryptographic layer which is TLS 1.3, but secio itself is a home brew job with no serious security analysis, which usually <a class="reference external" href="https://github.com/tendermint/tendermint/issues/3010">goes</a><a class="reference external" href="https://github.com/tendermint/kms/issues/111">poorly</a>.  </p>
<p>There has been minimal discussion of secio’s security but <a class="reference external" href="https://github.com/auditdrivencrypto/secure-channel/blob/master/prior-art.md#ipfss-secure-channel">Dominic Tarr</a> raised some concerns in the <a class="reference external" href="https://github.com/ipfs/go-ipfs/pull/34">original pull request</a>.  I’ll reraise several concerns from that discussion: </p>
<p>First, there is no effort made to hide secio node keys because “IPFS has no interest in [metadata privacy]” according to Brendan McMillion, so nodes leak their identities onto the raw internet.  We think identifying nodes sounds easy anyways, but at minimum this invites attacks.  There is an asymmetry to key exchanges that leaks less by first establishing a secure channel and only then authenticating.  We might reasonably break this asymmetry by deciding that specific roles require more privacy.  We might for example help protect validator operators or improve censorship resistance in some cases, like fishermen. </p>
<p>Second, there is cipher suit agility in secio, at minimum in their use of multihash, but maybe even in the underlying key exchange itself.  We’ve seen numerous attacks on TLS &lt;= 1.2 due to cipher suit agility, especially the downgrade attacks.  I therefore strongly recommend using TLS 1.3 <em>if</em> cipher suit agility is required.  We could likely version the entire protocol though, thus avoiding any cipher suit agility.  In any case, constructs like multihash should be considered hazardous in even basic key exchanges, but certainly in more advanced protocols involving signatures or associated data.</p>
<p>Third, there are <a class="reference external" href="https://github.com/libp2p/go-libp2p-secio/issues/12">no ACKs in secio</a> which might yield attacks when a higher level protocol actually depends upon the underlying insecure transport’s own ACKs.  I suppose UDP transport support already requires higher level protocol handle any required ACKs themselves anyways.  (<a class="reference external" href="https://github.com/OpenBazaar/openbazaar-go/issues/483">related</a>).</p>
<p>As QUIC uses UDP only, we could add TCP based transport that uses TLS 1.3, perhaps by extending libp2p’s existing transport with support for TLS 1.3, or perhaps adding a more flexible TLS 1.3 layer.  We might prefer a flexible TLS 1.3 layer over conventional TLS integration into libp2p extending transports because our authentication privacy demands might work differently from TLS’s server oriented model.  </p>
<p>We could identify some reasonable <a class="reference external" href="https://noiseprotocol.org/noise.html">Noise</a><a class="reference external" href="https://github.com/mcginty/snow">variant</a>, <em>if</em> avoiding the complexity of TLS sounds like a priority and ACKs are always handled by higher layers.  I believe Noise XX fits the blockchain context well, due to Alice and Bob roles being easily reversible, improved modularity, and more asynchronous key certification from on-chain data.  At the extreme, we could imagine identifying particular handshakes for particular interactions though, like GRANDPA using KK and fishermen using NK.  </p>
<p>In short, we should make a new years resolution to replace secio, with our two simplest routes being either TLS 1.3 or Noise XX. </p>
<hr class="docutils" />
<p>Aside from these authentication repairs, there are two additional directions for possible future work:</p>
<ul class="simple">
<li><p><em>Post-quantum key exchange.</em>  We’d likely employ LWE scheme here.  Right now, CSIDH remains young and slow, but the small key size and long-term keys claims indicate that   <a class="reference external" href="https://www.esat.kuleuven.be/cosic/csidh-post-quantum-key-exchange-using-isogeny-based-group-actions/">CSIDH</a> might integrate better with Noise and blockchains.  I’d skip the <a class="reference external" href="https://github.com/noiseprotocol/noise_wiki/wiki/Post-Quantum-Noise-with-New-Hope">existing specification</a> for integrating Noise with New Hope Simple.  Adam Langely has good arguments for <a class="reference external" href="https://www.imperialviolet.org/2018/12/12/cecpq2.html">selecting the NTRU variant NRSS+SXY for Google’s CECPQ2 experiment</a>.  I  the module-LWE <a class="reference external" href="https://pq-crystals.org/kyber/">Kyber</a></p></li>
<li><p><em>Forward-security.</em>  There is some multi-hop message forwarding in libp2p, but it provides only another addressing technique, not a true connection abstraction layer like say GNUNet’s CADET layer.  CADET actually employs the Axolotl forward secure ratchet.  </p></li>
</ul>
<p>I’m always a fan of both post-quantum and forward security for encryption, but the benefits might prove minimal in our context.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">Web3 Foundation Research</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../polkadot.html">Polkadot</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html">Polkadot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Availability_and_Validity.html">Availability and Validity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../GRANDPA.html">GRANDPA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ICMP.html">ICMP Scheme</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Parachain-Allocation.html">Parachain Allocation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Polkadot-Runtime-Environment.html">Polkadot Runtime Environment Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Token Economics.html">Token Economics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../BABE.html">BABE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../NPoS.html">NPoS</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../keys.html">Keys</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="index.html">Polkadot’s cryptography</a></li>
<li class="toctree-l3"><a class="reference internal" href="1-accounts.html">Account signatures and keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="1-accounts-more.html">Account signatures and keys in Polkadot</a></li>
<li class="toctree-l3"><a class="reference internal" href="2-staking.html">Nomination</a></li>
<li class="toctree-l3"><a class="reference internal" href="3-session.html">Session keys</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Transport layer authentication - libp2p’s SECIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="creation.html">Account key creation ideas for Polkadot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../networking.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../slashing.html">Slashing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../research_team_members.html">Research Team Members</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../../polkadot.html">Polkadot</a><ul>
  <li><a href="../keys.html">Keys</a><ul>
      <li>Previous: <a href="3-session.html" title="previous chapter">Session keys</a></li>
      <li>Next: <a href="creation.html" title="next chapter">Account key creation ideas for Polkadot</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Web3 Foundation.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
      |
      <a href="../../_sources/polkadot/keys/4-secio.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>